## メニューシステム (menus_system)

このフォルダには、簡単なメニュー注文のサンプルプログラムが入っています。
Ruby のクラス設計（継承）と、簡易なコマンドライン入力による注文処理の例になっています。

### 概要

- `Menu` クラスを親に、`Food` と `Drink` クラスが継承しています。
- `index.rb` がエントリポイントで、用意されたメニューを表示し、ユーザーが番号と個数を入力すると合計金額を表示します。
- 割引ルールが組み込まれており、個数に応じた割引や特定の曜日の割引が適用されます。

### ファイル一覧と説明

- `menu.rb` - 基底クラス `Menu` を定義します。
  - 属性: `name`, `price`。
  - メソッド: `info`（メニュー情報文字列を返す）、`get_total_price(count)`（個数に応じた合計金額を返す）、`Menu.is_discount_day?`（日曜かどうか判定）。
  - 割引ルール（実装上の挙動）:
    - 個数が3以上なら合計からさらに 100円引き。
    - `Menu.is_discount_day?` が真（実装では日曜日）でかつ個数が1以上の場合、さらに 100円引き。
    - 両方条件を満たすと合算して 200円引きになります。

- `food.rb` - `Menu` を継承した `Food` クラス。
  - 追加属性: `calorie`。
  - `info` は "名前 価格円 (kcal)" の形式を返す。
  - `calorie_info` メソッドあり（例: "ピザは700kcalです"）。

- `drink.rb` - `Menu` を継承した `Drink` クラス。
  - 追加属性: `amount`（ml）。
  - `info` は "名前 価格円 (ml)" の形式を返す。

- `index.rb` - 実行スクリプト（エントリポイント）。
  - サンプルメニューを生成して配列 `menus` に格納。
  - 各メニューを番号付きで出力し、ユーザーに番号選択と個数入力を促す。
  - 選択されたメニューの `get_total_price(count)` を呼んで金額を表示。

### 実行方法

PowerShell などで `menus_system` ディレクトリに移動して、次のように実行します（Ruby がインストールされていること）：

```powershell
cd C:\Users\gomaa\Desktop\programing_study\ruby\menus_system
ruby .\index.rb
```

スクリプトは標準入力から受け取りを行います。プロンプトに従って番号と個数を入力してください。

### 実行例（サンプル）

出力例（一部）:

```
日曜限定100円割引セール実施中!
0. ピザ 800円 (700kcal)
1. すし 1000円 (600kcal)
2. コーラ 300円 (500ml)
3. お茶 200円 (400ml)
--------------
メニューの番号を選択してください
```

ユーザーが `0` を入力して `3` と入力した場合（ピザを3個）:

```
選択されたメニュー: ピザ
個数を入力してください(3つ以上で100円割引)
お会計は2300円です
```

（※計算: 800 * 3 = 2400, 3つ以上で -100 → 2300。日曜割引があればさらに -100 となります）

### 入力挙動と注意点（現在の実装）

- `gets.chomp.to_i` を使っているため、非数値入力は `0` として扱われます。
- メニュー選択で無効な番号を入力すると `menus[order]` が `nil` になり、その後の `selected_menu.name` や `get_total_price` 呼び出しで `NoMethodError` になる可能性があります。
- 個数が負数や極端な大きさでも特にチェックが無く計算されます（マイナスや異常値がそのまま計算に反映されます）。
- 割引は合算される実装です（個数 >= 3 の割引と日曜割引が両方適用され得ます）。

### 改善案（提案）

1. 入力バリデーションを追加する
   - メニュー番号の範囲チェック（存在しない番号なら再入力を促す）。
   - 個数は 1 以上の整数のみ受け付ける。

2. 割引ロジックの明確化
   - 割引の適用順や上限を明示する（例えば合計割引額の上限を設ける）。

3. エラーハンドリング
   - `menus[order]` が `nil` の場合のエラーメッセージ。

4. ユーザー体験の向上
   - メニュー選択の再入力ループ、合計表示の内訳表示（税、割引の内訳）など。

---

必要であれば、上の改善案を反映した修正版（入力検証・例外処理・テストなど）をこちらで作成できます。どの改善を優先したいか教えてください。
